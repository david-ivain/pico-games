pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
local bat_sz = 24

local x = {8, 112}
local y = {57, 57}
local spd = {2, 2}
local scr = {0, 0}
local scr_len = {1, 1}

local xb = 60
local yb = 65
local mxb = 0
local myb = 0
local spdb = 2
local ball_attached = 1

function _update60()
  if (btn(‚¨ÜÔ∏è)) then
    y[1] -= spd[1]
  end
  if (btn(‚¨áÔ∏è)) then
    y[1] += spd[1]
  end
  if (btn(üÖæÔ∏è) and ball_attached == 1) then
    sfx(0)
    mxb += spdb
    ball_attached = 0
  end
  if y[1] < 10 then
    y[1] = 10
  elseif y[1] >= 126 - bat_sz then
    y[1] = 126 - bat_sz
  end
  if (ball_attached == 0) then
    -- ball physics
    xb += mxb
    yb += myb
  elseif(ball_attached == 1) then
    xb = x[1] + 8
    yb = y[1] + 8
  else
    xb = x[2] - 8
    yb = y[2] + 8
  end
  
  if (xb < 0) then
  		inc_scr(2)
    ball_attached = 1
  elseif(xb >= 120) then
    inc_scr(1)
    ball_attached = 2
  end
end

function _draw()
  cls(0)
  -- draw map
  map(0, 0, 0, 0, 16, 16)
  -- print score
  print("--", 60, 0)
  print(scr[1], 60 - scr_len[1] * 4, 0)
  print(scr[2], 68, 0)
  -- draw bat 1
  draw_bat(x[1], y[1])
  -- draw bat 2
  draw_bat(x[2], y[2])
  -- draw ball
  spr(4, xb, yb)
end

function draw_bat(x, y)
  spr(0, x, y)
  spr(16, x, y + 8)
  spr(32, x, y + 16)
end

function inc_scr(player)
  scr[player] += 1
  scr_len[player] = #tostring(scr[player])
end

__gfx__
0077770066666666cd000000000000e8000770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0766667077777777dc0000000000008e076556700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7655556700000000cd000000000000e8065005600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7650056700000000dc0000000000008e750000570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7650056700000000cd000000000000e8750000570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7650056700000000dc0000000000008e065005600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7650056700000000cd000000000000e8076556700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7650056700000000dc0000000000008e000770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76500567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
76555567000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07666670000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0211111111111111111111111111110300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000006050110601a070300703007028050180400b0300302001010000000b0002e0003000025000190000d000050000400004000000000000001000010000200002000020000200000000010000000000000
